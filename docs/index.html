<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ng’ara</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./ngara.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-XCGZZVKFDT"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-XCGZZVKFDT', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="styles.css">
<meta name="twitter:title" content="ng’ara">
<meta name="twitter:description" content="Coding for all for better today and tommorow">
<meta name="twitter:image" content="https://lugoga.github.io/semba-quarto/thumbnail_blog.png">
<meta name="twitter:creator" content="@semba753">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">ng’ara</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/lugoga"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/semba2020"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/channel/UC9uZ1KPyo7zIzI4BnUtHPfA"> <i class="bi bi-youtube" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="./blog.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-apps--links" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Apps &amp; Links</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-apps--links">    
        <li>
    <a class="dropdown-item" href="https://semba.netlify.app/">
 <span class="dropdown-text">Semba-blog Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://semba-blog.netlify.app/">
 <span class="dropdown-text">Semba Data Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://semba.shinyapps.io/kwala/">
 <span class="dropdown-text">Kwala commercial CIty</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://semba.shinyapps.io/coastal_dashboard/">
 <span class="dropdown-text">Marine Hub</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://nemp.shinyapps.io/nemp/">
 <span class="dropdown-text">Environmental Master Plan</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://semba.shinyapps.io/OceanWebApp/">
 <span class="dropdown-text">Hydrographic Data Hub</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://semba.shinyapps.io/marineTz/">
 <span class="dropdown-text">Potential Fishing Zones</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://semba.shinyapps.io/vizingaApp/">
 <span class="dropdown-text">TAFIRI Apps</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://rweekly.org/">
 <span class="dropdown-text">R Weekly</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://www.r-bloggers.com/">
 <span class="dropdown-text">R Bloggers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://www.tmbish.me/lab/highcharter-cookbook/">
 <span class="dropdown-text">Highcharter</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./archive.html"> 
<span class="menu-text">Archive</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<div class="quarto-about-marquee content">
  <div class="about-image-container">
  </div>
  <div class="about-contents">
     <main class="content" id="quarto-document-content">
<!-- ::: {.grid} -->
<!-- ::: {.g-col-12 .g-col-md-6} -->
<!-- ![](sembaProfile3.jpg) -->
<!-- ::: -->
<!-- ::: {.g-col-12 .g-col-md-6} -->
<p>Greetings, I am Masumbuko Semba, a skilled data scientist specializing in spatial analysis and oceanography. Leveraging my programming expertise, I have developed a diverse range of tools, algorithms, and analytical workflows that streamline the organization, management, analysis, and modeling of data. Furthermore, I possess proficiency in various programming languages such as – <a href="https://www.mathworks.com/products/matlab.html">MATLAB</a>, <a href="https://www.python.org/">Python</a>, <a href="https://observablehq.com/@observablehq/observable-javascript">Observable JavaScript</a>, and R. By harnessing these languages, I am able to automate data processing and analysis tasks, as well as generate comprehensive reports in formats such as PDF or HTML documents. Notably, the scripts and tools I create ensure the reproducibility of data analysis workflows, bolstering informed decision-making processes. I take pride in openly sharing my code and work on platforms such as my <a href="https://semba.netlify.app/">blog</a>, <a href="https://semba-blog.netlify.app/">website</a> and <a href="https://github.com/lugoga/">github</a> accounts, allowing the public to freely access and utilize these resources.</p>
<p><img src="sembaProfile3.jpg" class="img-fluid"></p>
<!-- ::: -->
<!-- ::: -->
<section id="peer-review-articles" class="level2">
<h2 data-anchor-id="peer-review-articles">Peer Review Articles</h2>
<ol type="1">
<li><p><a href="https://www.sciencedirect.com/science/article/pii/S0165783623001091">Silas, M. O., Kishe, M. A., Semba, M. R., Kuboja, B. N., Ngatunga, B., Mgeleka, S. S., … &amp; Gullström, M. (2023). Seascape configuration influences big blue octopus (Octopus cyanea) catches: Implications for a sustainable fishery. Fisheries Research, 264, 106716.</a></p></li>
<li><p><a href="https://www.sciencedirect.com/science/article/pii/S0165783623001145">Silas, M. O., Semba, M. R., Mgeleka, S. S., Van Well, L., Linderholm, H. W., &amp; Gullström, M. (2023). Using fishers’ local ecological knowledge for management of small-scale fisheries in data-poor regions: Comparing seasonal interview and field observation records in East Africa. Fisheries Research, 264, 106721</a></p></li>
<li><p><a href="https://www.ajol.info/index.php/wiojms/article/view/225660">Lugendo, B. R., Igulu, M. M., Semba, M. L., &amp; Kimirei, I. A. (2022). Caudal fin as a proxy for dorsal muscle for nutrient enrichment monitoring using stable isotope analysis: the case of Gerres filamentosus and G. oyena from mangrove creeks of Tanzania. Western Indian Ocean Journal of Marine Science, 21(2), 71-81.</a></p></li>
<li><p><a href="https://www.diva-portal.org/smash/record.jsf?pid=diva2:1638631">Silas, M. O., Semba, M. L., Mgeleka, S., Linderholm, H. W., &amp; Gullström, M. (2022). Fishers’ ecological knowledge for management in data-poor fisheries: a case of East African small-scale fisheries in a changing climate.</a></p></li>
<li><p><a href="https://www.ajol.info/index.php/wiojms/article/view/198108">Silas, M. O., Kishe, M. A., Mshana, J. G., Semba, M. L., Mgeleka, S. S., Kuboja, B. N., … &amp; Matiku, P. (2021). Growth, mortality, exploitation rate and recruitment pattern of Octopus cyanea (Mollusca: Cephalopoda) in the WIO region: A case study from the Mafia Archipelago, Tanzania. Western Indian Ocean Journal of Marine Science, 20(1), 71-79.</a></p></li>
<li><p><a href="https://www.ajol.info/index.php/wiojms/article/view/197123/">Peter, N., Semba, M., Lugomela, C., &amp; Kyewalyanga, M. (2021). Seasonal variability of vertical patterns in chlorophyll-a fluorescence in the coastal waters off Kimbiji, Tanzania. Western Indian Ocean Journal of Marine Science, 20(1), 21-33.</a></p></li>
<li><p><a href="https://www.ajol.info/index.php/wiojms/article/view/174215">Kyewalyanga, M. S., Peter, N., Semba, M., &amp; Mahongo, S. B. (2020). Coastal upwelling and seasonal variation in phytoplankton biomass in the Pemba Channel. Western Indian Ocean Journal of Marine Science, (1/2020), 19-32.</a></p></li>
<li><p><a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0210303">Semba, M., Lumpkin, R., Kimirei, I., Shaghude, Y., &amp; Nyandwi, N. (2019). Seasonal and spatial variation of surface current in the Pemba Channel, Tanzania. PloS one, 14(1), e0210303</a></p></li>
<li><p><a href="https://www.ajol.info/index.php/wiojms/article/view/175825/">Peter, N., Semba, M., Lugomela, C., &amp; Kyewalyanga, M. S. (2018). The influence of physical-chemical variables on the spatial and seasonal variation of Chlorophyll-a in coastal waters of Unguja, Zanzibar, Tanzania. Western Indian Ocean Journal of Marine Science, 17(2), 25-34</a></p></li>
<li><p><a href="https://www.ajol.info/index.php/wiojms/article/view/138510">Semba, M., Kimirei, I., Kyewalyanga, M., Peter, N., Brendonck, L., &amp; Somers, B. (2016). The decline in phytoplankton biomass and prawn catches in the Rufiji-Mafia Channel, Tanzania. Western Indian Ocean Journal of Marine Science, 15(1), 15-29.</a></p></li>
<li><p><a href="https://www.tandfonline.com/doi/abs/10.1080/08920753.2010.483174">Crawford, B., Herrera, M. D., Hernandez, N., Leclair, C. R., Jiddawi, N., Masumbuko, S., &amp; Haws, M. (2010). Small scale fisheries management: lessons from cockle harvesters in Nicaragua and Tanzania. Coastal Management, 38(3), 195-215.</a></p></li>
</ol>
</section>
<section id="book-chapters" class="level2">
<h2 data-anchor-id="book-chapters">Book chapters</h2>
<ol type="1">
<li><p><a href="https://link.springer.com/chapter/10.1007/978-3-319-25370-1_13">Kimirei, I. A., Igulu, M. M., Semba, M., &amp; Lugendo, B. R. (2016). Small estuarine and non-estuarine mangrove ecosystems of Tanzania: overlooked coastal habitats?. Estuaries: A Lifeline of Ecosystem Services in the Western Indian Ocean, 209-226.</a></p></li>
<li><p><a href="https://link.springer.com/chapter/10.1007/978-3-319-69656-0_3">Kimirei, I. A., Semba, M., Mwakosya, C., Mgaya, Y. D., &amp; Mahongo, S. B. (2017). Environmental Changes in the Tanzanian Part of Lake Victoria. Lake Victoria fisheries resources: Research and management in Tanzania, 37-59.</a></p></li>
<li><p><a href="https://link.springer.com/chapter/10.1007/978-3-319-69656-0_11">Mahatane, A., Mgaya, Y. D., Hoza, R. B., Onyango, P. O., &amp; Semba, M. (2017). Co-management of Lake Victoria Fisheries. Lake Victoria Fisheries Resources: Research and Management in Tanzania, 219-239.</a></p></li>
<li><p><a href="https://link.springer.com/chapter/10.1007/978-3-319-69656-0_12">Sobo, F., Mgaya, Y. D., Kayanda, R. J., &amp; Semba, M. (2017). Fisheries Statistics for Lake Victoria, Tanzania. Lake Victoria Fisheries Resources: Research and Management in Tanzania, 241-253.</a></p></li>
<li><p><a href="">Semba, M., Ndebele-Murisa, M., Mubaya, C. P., Kimirei, I. A., Chavula, G., Mwedzi, T., … &amp; Zenda, S. (2021). Historical and Future Climate Scenarios of the Zambezi River Basin. Ecological Changes in the Zambezi River Basin, 115.</a></p></li>
<li><p><a href="">Ndebele-Murisa, M., Kimirei, I. A., Mubaya, C. P., Chavula, G., Mwedzi, T., Mutimukuru-Maravanyika, T., &amp; Semba, M. (2021). A Review of the Comparative Research Method. Ecological Changes in the Zambezi River Basin, 15.</a></p></li>
<li><p><a href="">Ndebele-Murisa, M. (Ed.). (2021). Ecological Changes in the Zambezi River Basin. African Books Collective.</a></p></li>
<li><p><a href="https://www.jstor.org/stable/pdf/j.ctv1grbbq5.8.pdf">Mgaya, Y. D., &amp; Mahongo, S. B. (2017). Lake victoria fisheries resources. Springer.</a></p></li>
</ol>
</section>
<section id="digital-books" class="level2">
<h2 data-anchor-id="digital-books">Digital books</h2>
<ol type="1">
<li><p><a href="https://lugoga.github.io/geomarine/">Semba M (2021). Practical Spatial Data Coastal and Marine Environment in R</a></p></li>
<li><p><a href="https://lugoga.github.io/r-package/">Semba M, Peter N. &amp; I. Kimirei (2020). Developing packages in R</a></p></li>
<li><p><a href="https://lugoga.github.io/learning_r/">Semba M. (2018). A gentle Introduction of Coding with R</a></p></li>
<li><p><a href="https://lugoga.github.io/octopus/">Semba M., Silas M., Matiku P., &amp; Chande M. (2019) Spatial distribution of <em>octopus</em> fishery in Kilwa District</a></p></li>
<li><p><a href="https://lugoga.github.io/master_thesis/">Semba M. (2018). Putting fishing landing sites and their instranstructure on spatial aspect</a></p></li>
<li><p>Semba M. (2023). Fisheries Data Management in Modern R and Excel. Manual with Applications in the Western Indian Ocean Region]. Food and Agriculture Organization and the Western Indian Ocean Marine Science Association</p></li>
</ol>
</section>
<section id="interactive-apps" class="level2">
<h2 data-anchor-id="interactive-apps">Interactive Apps</h2>
<ol type="1">
<li><p><a href="https://https//semba.shinyapps.io/kwala/">Kwala Commercial and Investment City</a></p></li>
<li><p><a href="https://semba.shinyapps.io/marineTz/">The Exclusive Economic Zone Tool</a></p></li>
<li><p><a href="https://semba.shinyapps.io/OceanWebApp/">The Pemba Channel Hydrographic Hub</a></p></li>
<li><p><a href="https://semba.shinyapps.io/coastal_dashboard/">The coastal and Marine Data Visualization tool</a></p></li>
<li><p><a href="https://nemp.shinyapps.io/nemp/">The National Environmenal Master Plan</a></p></li>
<li><p><a href="https://lugoga.github.io/msp/">The Dashboard for Marine Spatial planning</a></p></li>
</ol>
</section>
<section id="packages" class="level2">
<h2 data-anchor-id="packages">Packages</h2>
<p>A <a href="https://github.com/lugoga/wior"><strong>wior</strong></a> packaged built by Masumbuko Semba and Nyamisi Peter focusing on Easy Tidy and Process Oceanographic Data. The packages is basically developed to help marine and freshwater scientist access a large and varied format of in-situ and satellite data in easy way. In fact the package has made data access in much easy way. The authors are trying to remove the barrier of data access and leave a space for scientists to focus in much deeper thinking of their field rather than spending several days to understand codes for a specific data download. The package contains several tools that allows scientist to get a wide array of datasets. And the funny things is that you get a tidy format result of the download, which is easy to handle in R and also to share it out of R environment. The tidy format is in form that many scientist familiar with Excel spreadsheet will find it handy. You can access this package through this link: https://github.com/lugoga/wior</p>


</section>
</main> 
    <div class="about-footer"><div class="about-links">
  <a href="https://github.com/lugoga" class="about-link" rel="" target="">
    <i class="bi bi-github"></i>
     <span class="about-link-text">Github</span>
  </a>
</div>
</div>
  </div>
</div>
 <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>