{
  "hash": "76bf8f4def2b911a0327bef054a24625",
  "result": {
    "markdown": "---\ntitle: \"plotting in Python with Seaborn: Line plot\"\nauthor: \n  - name: Masumbuko Semba\n    url: https://semba.netlify.app\n    orcid: 0000-0002-5002-9747\n    affiliation: Nelson Mandela African Institution of Science and Technology\n    affiliation-url: https://semba.netlify.app/ \ndate: \"2023-02-22\"\ncategories: [Analysis, Visualization, Python]\nimage: \"lineplot.jpg\"\ndraft: false # setting this to `true` will prevent your post from appearing on your listing page until you're ready!\nbibliography: ../blog.bib\nexecute: \n  warning: false\nfig-width: 7\nfig-height: 5\ncode-line-numbers: true\n\n---\n\n\n## Introduction\n\nIn [visualization with Seaborn](https://lugoga.github.io/semba-quarto/posts/seabornVisualization/) of this series, we were introduced on the power visualization and dove into distributions plot. In this post we are going focus on jointplot. `jointplot` is used to plot the histogram distribution of two columns, one on the `x-axis` and the other on the `y-axis`. A scatter plot is by default drawn for the points in the two columns. Seaborn has nifty function called `jointplot()`, which is dedicated for this type of plot. \n\n\n## Loading libraries\n\nThough most people are familiar with plotting using matplot, as it inherited most of the functions from MatLab. Python has an extremely nady library for data visualiztion called seaborn. The Seaborn library is based on the Matplotlib library. Therefore, you will also need to import the Matplotlib library.\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport pandas as pd\nimport numpy as np\n\nsns.set_theme()\n```\n:::\n\n\n## Dataset\n\nWe are going to use a `flights` dataset, which has 10 years of monthly airline passenger data. We do not need to download this dataset as it comes with the seaborn package. We only need to load it from the package into our session using `sns.load_dataset` function and specify the `penguins` as the name of the dataset and assign it as df;\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.python .cell-code}\ndf = sns.load_dataset('flights')\n```\n:::\n\n::: {.cell}\n\n```{.python .cell-code}\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     year month  passengers\n0    1949   Jan         112\n1    1949   Feb         118\n2    1949   Mar         132\n3    1949   Apr         129\n4    1949   May         121\n..    ...   ...         ...\n139  1960   Aug         606\n140  1960   Sep         508\n141  1960   Oct         461\n142  1960   Nov         390\n143  1960   Dec         432\n\n[144 rows x 3 columns]\n```\n:::\n:::\n\n\nA printed `df` dataset shows that a flight dataset is made up of three variables --- year, month, and number of passenger between January 1949 and December 1960, which are arranged in long format. To draw a line plot using long-form data, we simply assign the `x` and `y` variables\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\nfig = plt.figure()\nsns.lineplot(data=df, x=\"year\", y=\"passengers\")\nplt.ylabel('Passengers')\nplt.show()\n```\n\n::: {.cell-output-display}\n![Annual number of flight passenger](index_files/figure-html/fig-ts-1.png){#fig-ts width=672}\n:::\n:::\n\n\nHowever, looking at @fig-ts1, we notice that the confidence level is aslo plotted thought we did not specify them. The reason is that each year has twelve records of monthly number of passengers, which when plotted are also estimated to show the variability of passenger on that year. So if we want to draw only the line, we may filter a specific year, for this case I only want to plot passengers for July during the same period. \n\nFirst, we need to filter the dataset to July and assign a new dataset as `df_july`. The chunk below shows a line of code that filter passenger between 1949 to 1960 for July only.\n\n\n::: {.cell}\n\n```{.python .cell-code}\ndf_july = df[df.month == 'Jul']\n```\n:::\n\n\nThen plot.\n\n\n::: {.cell}\n\n```{.python .cell-code}\nfig = plt.figure()\nsns.lineplot(data=df_july, x=\"year\", y=\"passengers\")\nplt.ylabel('Passengers')\nplt.show()\n```\n\n::: {.cell-output-display}\n![Number of flight passenger for July during the period](index_files/figure-html/fig-ts1-3.png){#fig-ts1 width=672}\n:::\n:::\n\n\nBecause I still learning how to deal with time in python, I simply switch to R as quarto allows me to swap code for the two languages within the same environment. I switch to R code and then convert the panda data frame to tibble using the reticulate package [@reticulate]. The package allows us to convert pandas dataframe to tibble using a `py` function within R chunk;\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntb = reticulate::py$df\n```\n:::\n\n\nThen within R chunk, we can add a new column `date` contain date for each month\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntb = tb |>\n  dplyr::mutate(date = \nseq(lubridate::my(011949), lubridate::my(121960), by = \"month\"))\n\ntb |> head()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  year month passengers       date\n1 1949   Jan        112 1949-01-01\n2 1949   Feb        118 1949-02-01\n3 1949   Mar        132 1949-03-01\n4 1949   Apr        129 1949-04-01\n5 1949   May        121 1949-05-01\n6 1949   Jun        135 1949-06-01\n```\n:::\n:::\n\n\nThe printed tibble has one added variable date. Since we have created this dataset, we can convert it back to python pandas dataframe by simply using `r.` funtion within the python chunk;\n\n\n::: {.cell}\n\n```{.python .cell-code}\npdf = r.tb\npdf\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       year month  passengers        date\n0    1949.0   Jan       112.0  1949-01-01\n1    1949.0   Feb       118.0  1949-02-01\n2    1949.0   Mar       132.0  1949-03-01\n3    1949.0   Apr       129.0  1949-04-01\n4    1949.0   May       121.0  1949-05-01\n..      ...   ...         ...         ...\n139  1960.0   Aug       606.0  1960-08-01\n140  1960.0   Sep       508.0  1960-09-01\n141  1960.0   Oct       461.0  1960-10-01\n142  1960.0   Nov       390.0  1960-11-01\n143  1960.0   Dec       432.0  1960-12-01\n\n[144 rows x 4 columns]\n```\n:::\n:::\n\n\nThen we can now plot a line and use the new column `date` we just created instead of year.\n\n\n::: {.cell}\n\n```{.python .cell-code}\nfig = plt.figure()\nsns.lineplot(data=pdf, x=\"date\", y=\"passengers\")\nplt.ylabel('Passengers')\nplt.show()\n```\n\n::: {.cell-output-display}\n![Monthly Number of flight passengers](index_files/figure-html/fig-ts3-1.png){#fig-ts3 width=672}\n:::\n:::\n\n\n@fig-ts3 and @fig-ts1 are almost similar but while @fig-ts3 used year as x-axis, @fig-ts3 used date in the x-axis. You can see that @fig-ts3 clearly shows the variability of passenger within the year, which was not possible with @fig-ts1.\n\n\nWe can assign a grouping semantic (hue, size, or style) to plot separate lines\n\n\n::: {.cell}\n\n```{.python .cell-code}\nfig = plt.figure()\nsns.lineplot(data=df, x=\"year\", y=\"passengers\", hue = \"month\")\nplt.ylabel(\"Passengers\")\nplt.show()\n```\n\n::: {.cell-output-display}\n![Number of flight passenger by month during the period](index_files/figure-html/fig-ts4-3.png){#fig-ts4 width=672}\n:::\n:::\n\n\nSimilarly, we can assign multiple semanti variables of the same variable that makes the plot more appealing ore easily to distinguish between the assigned parameters.\n\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\nfig = plt.figure()\nsns.lineplot(data=df, x=\"year\", y=\"passengers\", hue = \"month\", style = \"month\")\nplt.ylabel(\"Passengers\")\nplt.show()\n```\n\n::: {.cell-output-display}\n![Number of flight passenger by month during the period](index_files/figure-html/fig-ts5-5.png){#fig-ts5 width=672}\n:::\n:::\n\n\n\n## Cited Materials\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}